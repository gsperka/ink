<div class="profile">
  <ul>
    <% if current_user != nil %>
      <li> Hi, <%=User.find(session[:current_user_id]).username%>. Welcome to your profile page!</li>
    <%elsif current_google_user != nil%>
      <li> Hi, <%=Googleuser.find(session[:current_google_user_id]).name%>. Welcome to your profile page!</li>
    <%end%>
  </ul>
    <br>
    <li> Below is a history of all your sketches </li>
</nav>

<div class ='past_user_sketches'>
   <ul>
  <% @sketches.each_with_index do |sketch, index| %>
    <a href="<%= tree_sketch_path(sketch.tree_id, sketch.id) %>">
      <canvas width="600" height="600" class="sketch" id="sketch-<%= index %>"></canvas>
    </a>
    <script type="text/javascript">
      var jsonString = '<%= raw sketch.json_data %>';
      var sketchId = "sketch-" + "<%= index %>";
      sketchCanvas = new fabric.StaticCanvas(sketchId, {isDrawingMode: false});
      sketchCanvas.loadFromJSON(jsonString, sketchCanvas.renderAll.bind(sketchCanvas));
      $('.sketch').css({'height': '150px', 'width': '150px', 'border': '1px solid black'})
    </script>
  <% end %>
</div>


